--- a/ext/standard/string.c
+++ b/ext/standard/string.c
@@ -5252,7 +5252,7 @@
 		RETURN_FALSE;
 	}
 
-	if (len > s1_len - offset) {
+	if (((s1_len - offset) > (s1_len - offset))) {
 		len = s1_len - offset;
 	}
 
